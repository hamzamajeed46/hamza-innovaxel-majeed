<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <script src="/static/main.js"></script>
    <section class="container">
        <h1>URL Shortener</h1>
        <div class="box-container">
            <!-- Box for shortening a URL -->
            <div class="box">
                <h2>Add a URL to shorten</h2>
                <form method="POST" action="/shorten">
                    <label for="original_url">Enter URL to Shorten:</label>
                    <input type="url" id="original_url" name="original_url" placeholder="https://example.com" required>
                    <button type="submit">Shorten URL</button>
                </form>
                {% if short_code and not retrieved_url %}
                <div id="result">
                    <p><strong>Shortened URL:</strong> <a href="/shorten/{{ short_code }}" target="_blank">{{ request.host_url }}shorten/{{ short_code }}</a></p>
                </div>
                {% endif %}
            </div>

            <!-- Box for updating a URL -->
            <div class="box">
                <h2>Update an Existing Short URL</h2>
                <form id="update-form">
                    <label for="short_code_update">Enter Short Code:</label>
                    <input type="text" id="short_code_update" name="short_code" placeholder="e.g., abc123" required>

                    <label for="new_original_url">Enter New Original URL:</label>
                    <input type="url" id="new_original_url" name="new_original_url" placeholder="https://example.com" required>

                    <button type="submit">Update URL</button>
                </form>
                <div id="update-result" style="margin-top: 20px;"></div>
            </div>
        </div>
    </section>

    <section class="box-container">
        <div class="box">
        <!-- Form to retrieve a URL -->
        <h2>Retrieve an existing URL</h2>
        <form method="GET" action="/retrieve">
            <label for="short_code">Enter Short Code to Retrieve URL:</label>
            <input type="text" id="short_code" name="short_code" placeholder="e.g., abc123" required>
            <button type="submit">Retrieve URL</button>
        </form>

        {% if retrieved_url %}
        <div id="retrieved-result">
            <p><strong>Original URL:</strong> <a href="{{ retrieved_url }}" target="_blank">{{ retrieved_url }}</a></p>
        </div>
        {% endif %}

        {% if error %}
        <div id="error">{{ error }}</div>
        {% endif %}
    </div>
    

    <div class="box">
        <h2>Delete a Short URL</h2>
        <!-- Form to delete a short URL -->
        <form id="delete-form">
            <label for="short_code_delete">Enter Short Code to Delete:</label>
            <input type="text" id="short_code_delete" name="short_code" placeholder="e.g., abc123" required>
            <button type="submit">Delete URL</button>
        </form>

        <div id="delete-result" style="margin-top: 20px;"></div>
    </div>
    </section>

    <section class="box-container">
        <div class="box">
            <h2>URL Statistics</h2>
            <form id="stats-form">
                <label for="short_code_stats">Enter Short Code:</label>
                <input type="text" id="short_code_stats" name="short_code" placeholder="e.g., abc123" required>
                <button type="submit">Get Statistics</button>
            </form>
            <div id="stats-result" class="stats-container"></div>
        </div>
    </section>

    
</body>
</html>